# Actions File Format Specification

**Version:** 2.1.0  
**Author:** Darrion Burgess  
**License:** MIT  
**Semantic Vocabulary:** [Actions Vocabulary](https://vocab.example.org/actions/)

## Overview

This specification defines a plaintext file format for task management that serializes actions using the [Actions Vocabulary](https://vocab.example.org/actions/). The format is designed to be:

- **Human readable and writable** with any text editor
- **Machine parseable** for tooling and automation
- **Hierarchically structured** with explicit depth markers
- **Semantically compatible** with Schema.org Action

## Grammar Reference

The complete parsing grammar is available as a Tree-sitter parser: [tree-sitter-actions](https://github.com/your-repo/tree-sitter-actions)

## File Structure

An actions file consists of a list of **root actions**, each optionally containing **child actions** in a hierarchical structure.

```
action_list ::= root_action*

root_action ::= core_properties story? child_action*

child_action ::= '>' core_properties grandchild_action*
               | '>>' core_properties great_grandchild_action*
               | '>>>' core_properties double_great_grandchild_action*
               | '>>>>' core_properties leaf_action*
               | '>>>>>' core_properties
```

## Core Syntax

### Action Structure

Every action has the following structure:

```
[depth_markers] [state] name [properties...]
```

Where:
- **depth_markers**: `>` characters indicating hierarchy depth (1-6 levels)
- **state**: Current action state in brackets
- **name**: Action title/description
- **properties**: Optional metadata (order-independent)

### Depth Markers (Required for child actions)

| Marker | Depth | Semantic Class | Description |
|---------|--------|----------------|-------------|
| *(none)* | 1 | `actions:RootAction` | Top-level actions |
| `>` | 2 | `actions:ChildAction` | Child of root action |  
| `>>` | 3 | `actions:ChildAction` | Grandchild |
| `>>>` | 4 | `actions:ChildAction` | Great-grandchild |
| `>>>>` | 5 | `actions:ChildAction` | Double great-grandchild |
| `>>>>>` | 6 | `actions:ChildAction` | Leaf action (max depth) |

### State Markers (Required)

State is indicated by a character within square brackets:

| Syntax | Semantic Mapping | Description |
|--------|------------------|-------------|
| `[ ]` | `actions:NotStarted` | Not started (space) |
| `[x]` | `actions:Completed` | Completed |
| `[-]` | `actions:InProgress` | In progress |
| `[=]` | `actions:Blocked` | Blocked/awaiting |  
| `[_]` | `actions:Cancelled` | Cancelled |

### Name (Required)

The action name follows the state marker. Special characters that have semantic meaning must be escaped with backslash (`\`):

**Reserved characters:** `$ ! * + @ % > #`

```
[x] Buy groceries
[x] Call \*important\* client  // Escaped asterisks
[ ] Review PR \#123            // Escaped hash
```

## Optional Properties

Properties can appear in any order after the name. Multiple instances of multi-value properties (like contexts) are allowed.

### Description

**Syntax:** `$ description text`  
**Semantic:** `schema:description`

```
[ ] Fix bug $The login form isn't validating email properly
```

### Priority

**Syntax:** `! [1-4]`  
**Semantic:** `actions:priority` (Eisenhower Matrix)

```
[ ] Emergency server fix !1
[ ] Weekly report !4
```

### Project/Story (Root actions only)

**Syntax:** `* project_name`  
**Semantic:** `actions:project`

```
[ ] Implement user login *Website Redesign
> [ ] Design login form
> [ ] Implement backend auth
```

### Context (GTD-style)

**Syntax:** `+ context_name[, context_name]*`  
**Semantic:** `actions:context`

```
[ ] Call dentist +phone
[ ] Review documents +computer,office
[ ] Buy ingredients +errands,driving
```

### Do Date/Time

**Syntax:** `@ date_time_spec [duration] [recurrence]`  
**Semantic:** `actions:doDateTime` / `actions:doDate` / `actions:doTime`

#### Date/Time Formats (ISO 8601 subset)

```
@ 2025-01-20              // Date only
@ 14:30                   // Time only  
@ 2025-01-20T14:30        // Date and time
```

#### Duration

**Syntax:** `D duration_minutes`  
**Semantic:** `actions:durationMinutes`

```
@ 2025-01-20T14:30D60     // 60 minute meeting
@ 09:00D30                // 30 minute task
```

#### Recurrence

**Syntax:** `R frequency_spec`  
**Semantic:** `actions:recurrenceFrequency` and related properties

##### Daily Recurrence
```
@ 09:00RDa                // Daily at 9am
@ 09:00RDa14:00           // Daily at 9am and 2pm
```

##### Weekly Recurrence
```
@ 2025-01-20RW            // Weekly from start date
@ 2025-01-20RWMon,Wed,Fri // Monday, Wednesday, Friday
@ RWTue                   // Every Tuesday (no start date)
```

### Completed Date/Time

**Syntax:** `% date_time_spec`  
**Semantic:** `actions:completedDateTime`  
**Note:** Typically auto-generated by tooling when state changes to completed.

```
[x] Submit report %2025-01-19T16:45
```

### Unique Identifier

**Syntax:** `# uuid_v7`  
**Semantic:** `schema:identifier`  
**Note:** UUIDv7 format preferred for sortability

```
[ ] Important task #01234567-89ab-7def-8123-456789abcdef
```

## Complete Examples

### Minimal Example
```
[ ] Buy milk
```

### Rich Example
```
[x] Plan Q1 marketing campaign $Create comprehensive strategy for product launch
    !2 *Product Launch +computer,office 
    @2025-01-15T09:00D120R 
    %2025-01-16T11:30 
    #01924567-89ab-7def-8123-456789abcdef
> [ ] Research competitor campaigns +research,computer
> [ ] Design campaign assets +design,computer
> [ ] Set up tracking analytics +technical,computer
```

### Hierarchical Project Example
```
[ ] Website Redesign Project *Q1 Goals
> [ ] Design Phase
>> [ ] Create wireframes +design
>> [ ] Design mockups +design
>> [ ] User testing +research,user-testing
> [ ] Development Phase  
>> [ ] Set up development environment +technical,computer
>> [ ] Implement responsive layout +coding,computer
>> [ ] Add accessibility features +coding,accessibility
> [ ] Launch Phase
>> [ ] Deploy to staging +devops,computer
>> [ ] Final testing +testing,qa
>> [ ] Go live +devops,computer
```

### Recurring Task Example
```
[ ] Weekly team standup @2025-01-20T09:00D30RWMon,Wed,Fri +meeting,video-call *Team Management
[ ] Monthly reports @2025-01-31T16:00D60RMonthly +computer,office,reporting
[ ] Daily meditation @07:00D15RDa +mindfulness,morning
```

## Implementation Notes

### Parser Requirements

1. **Whitespace handling:** Implementers should be flexible with whitespace around markers
2. **Order independence:** Properties can appear in any order after the name
3. **Escaping:** Support backslash escaping of reserved characters in names and text
4. **Error recovery:** Gracefully handle malformed entries when possible

### Semantic Mapping

Each parsed element should map to the corresponding RDF triple using the Actions Vocabulary:

```turtle
# File: [ ] Buy milk +errands @2025-01-20
# RDF:
:action1 a actions:Action ;
    schema:name "Buy milk" ;
    actions:state actions:NotStarted ;
    actions:depth 1 ;
    actions:context "errands" ;
    actions:doDate "2025-01-20"^^xsd:date .
```

### Tooling Integration

- **Calendar export:** Actions with `@` dates can be exported to iCalendar format
- **Project management:** Actions with `*` projects can be grouped and tracked
- **GTD systems:** Actions with `+` contexts integrate with Getting Things Done workflows
- **Time tracking:** Actions with `D` durations support time estimation and tracking

## Extensions and Compatibility

This file format is designed to be backwards compatible. New optional properties can be added without breaking existing parsers. The semantic vocabulary provides a stable foundation for interoperability between different tools and systems.

For the complete semantic model, see the [Actions Vocabulary](https://vocab.example.org/actions/) specification.
